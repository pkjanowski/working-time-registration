#include "HD44780.h"
#include "main.h"
#include "stm32f0xx_hal.h"

#define HD44780_SET_RS		HAL_GPIO_WritePin(HD44780_RS_GPIO_Port, HD44780_RS_Pin, GPIO_PIN_SET);
#define HD44780_RESET_RS	HAL_GPIO_WritePin(HD44780_RS_GPIO_Port, HD44780_RS_Pin, GPIO_PIN_RESET);

#define HD44780_SET_E		HAL_GPIO_WritePin(HD44780_E_GPIO_Port, HD44780_E_Pin, GPIO_PIN_SET);
#define HD44780_RESET_E		HAL_GPIO_WritePin(HD44780_E_GPIO_Port, HD44780_E_Pin, GPIO_PIN_RESET);


void sendHalfByte(uint8_t data) {
	if (data & 0x01) HAL_GPIO_WritePin(HD44780_D4_GPIO_Port, HD44780_D4_Pin, GPIO_PIN_SET);
		else HAL_GPIO_WritePin(HD44780_D4_GPIO_Port, HD44780_D4_Pin, GPIO_PIN_RESET);

	if (data & 0x02) HAL_GPIO_WritePin(HD44780_D5_GPIO_Port, HD44780_D5_Pin, GPIO_PIN_SET);
		else HAL_GPIO_WritePin(HD44780_D5_GPIO_Port, HD44780_D5_Pin, GPIO_PIN_RESET);

	if (data & 0x04) HAL_GPIO_WritePin(HD44780_D6_GPIO_Port, HD44780_D6_Pin, GPIO_PIN_SET);
		else HAL_GPIO_WritePin(HD44780_D6_GPIO_Port, HD44780_D6_Pin, GPIO_PIN_RESET);

	if (data & 0x08) HAL_GPIO_WritePin(HD44780_D7_GPIO_Port, HD44780_D7_Pin, GPIO_PIN_SET);
		else HAL_GPIO_WritePin(HD44780_D7_GPIO_Port, HD44780_D7_Pin, GPIO_PIN_RESET);
}
